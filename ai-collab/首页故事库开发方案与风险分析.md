# 首页故事库开发方案与风险分析

## 一、开发方案

### 1. 组件结构与集成
- StoryLibraryPage（页面级主组件）
  - 复用/扩展 StoryList（支持卡片模式、批量选择、分页、排序）
  - 复用 CategoryManager（弹窗/侧栏方式集成）
  - 复用 StoryUpload（导入功能）
  - 统计区可新建 StatisticBar 组件或直接在顶部实现
- 组件命名、props、事件流与现有项目保持一致，便于维护和团队协作

### 2. 功能点
- 卡片展示、筛选、批量操作、单条操作、新建、导入、统计、分类管理、分页
- mock数据结构与StoryList/后端API一致（id, title, author, age_range, theme, style_id, created_at, updated_at...）
- 后续可无缝切换到真实API：/api/stories（GET，分页、筛选）、/api/stories/batch_delete、/api/stories/batch_export等

### 3. 代码实现计划
1. 新建 StoryLibraryPage.jsx，作为首页主入口
2. 复用并扩展 StoryList.js，支持卡片模式、批量操作、分页
3. 顶部集成"新建故事""导入""统计""分类管理"入口
4. 实现mock数据驱动的筛选、分页、批量操作
5. 预留API对接接口，后续切换到真实后端
6. 代码风格、目录、命名与现有项目完全一致

---

## 二、风险分析与应对

### 1. 组件复用与扩展风险
- 风险：StoryList.js 以表格/列表为主，直接复用到卡片模式时，props、样式、交互逻辑可能不完全适配。
- 应对：分析/重构 StoryList.js，将展示模式（表格/卡片）做成可切换或独立分离，统一props和事件流。

### 2. mock数据与真实API切换风险
- 风险：mock数据结构与后端API返回数据不一致，切换时需大幅调整前端代码。
- 应对：mock数据严格按照后端API文档和Story结构设计，提前模拟分页、筛选、异常等场景。

### 3. 批量操作与状态同步风险
- 风险：批量选择、删除、导出等操作，涉及多组件状态同步，易出现"选中状态丢失""操作未同步刷新"等问题。
- 应对：统一用全局或页面级状态管理，批量操作后强制刷新数据源。

### 4. 组件集成与UI一致性风险
- 风险：复用CategoryManager、StoryUpload等组件时，弹窗/侧栏集成方式与主页面风格不一致。
- 应对：统一采用MUI的Dialog/Drawer等标准弹窗/侧栏组件，保持风格一致。

### 5. 未来扩展与维护风险
- 风险：组件耦合度高，后续如需支持表格/卡片切换、移动端适配、主题切换等，改动成本大。
- 应对：组件设计时注意解耦，展示与数据逻辑分离，预留扩展点，及时补充注释和开发文档。

### 6. 真实API联调风险
- 风险：后端API变更、接口不稳定、数据格式调整，导致前端联调反复修改。
- 应对：前后端保持密切沟通，接口变更及时同步，前端做好异常处理、加载状态、分页优化。

---

如需进一步细化某一风险点的应对措施，或需要风险优先级排序，请补充说明。 